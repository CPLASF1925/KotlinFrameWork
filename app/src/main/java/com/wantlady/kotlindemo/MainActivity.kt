package com.wantlady.kotlindemoimport android.os.Bundleimport android.support.v7.app.AppCompatActivityimport android.view.Viewimport android.widget.Toastimport com.wantlady.kotlindemo.api.Apiimport com.wantlady.kotlindemo.api.UserApiServiceimport com.wantlady.kotlindemo.bean.UserBeanimport com.wantlady.kotlindemo.net.RetrofitManagerimport kotlinx.android.synthetic.main.activity_main.*import okhttp3.Callbackimport okhttp3.OkHttpClientimport okhttp3.Requestimport okhttp3.RequestBodyimport okhttp3.logging.HttpLoggingInterceptorimport retrofit2.Callimport retrofit2.Responseimport retrofit2.Retrofitimport retrofit2.converter.gson.GsonConverterFactoryclass MainActivity : AppCompatActivity(), View.OnClickListener {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        initView()    }    private fun initView() {        login.setOnClickListener(this)    }    /**     * 登录测试     */    fun login() {        Toast.makeText(this, "login", Toast.LENGTH_SHORT).show()        var mobile: String = mobile.text.toString()        mobile = "18612991023"        var pwd = "111111"        //日志拦截器        var httpLoggingInterceptor = HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.BODY)        //Okhttp对象        var okHttpClient = OkHttpClient.Builder()            .addInterceptor(httpLoggingInterceptor)            .build()        //创建Retrofit对象        var retrofit = Retrofit.Builder().baseUrl(Api.BASE_URL)            .client(okHttpClient)            .addConverterFactory(GsonConverterFactory.create()).build()        //创建请求接口类        var userApiService = retrofit.create(UserApiService::class.java)        userApiService.login(Api.LOGIN_URL, mobile, pwd).enqueue(object : retrofit2.Callback<UserBean> {            override fun onFailure(call: Call<UserBean>, t: Throwable) {            }            override fun onResponse(call: Call<UserBean>, response: Response<UserBean>) {                var userBean = response.body()                Toast.makeText(this@MainActivity, "" + userBean?.result?.phone, Toast.LENGTH_SHORT).show()            }        })    }    /**     * 点击事件     */    override fun onClick(v: View?) {        when (v!!.id) {            R.id.login -> login()            R.id.reg -> reg()        }    }    /**     * 注册测试     */    private fun reg() {        TODO("not implemented") //To change body of created functions use File | Settings | File Templates.    }}