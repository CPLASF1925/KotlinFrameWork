package com.kotlinframework.platformimport android.os.Bundleimport android.view.Viewimport android.widget.Toastimport com.kotlinframework.net.network.ApiErrorModelimport com.kotlinframework.net.network.NetResponseObserverimport com.kotlinframework.net.network.NetSchedulerimport com.kotlinframework.net.network.RetrofitManagerimport com.kotlinframework.platform.api.Apiimport com.kotlinframework.platform.api.ApiServiceimport com.kotlinframework.platform.bean.UserBeanimport com.trello.rxlifecycle2.android.ActivityEventimport com.trello.rxlifecycle2.components.support.RxAppCompatActivityimport com.trello.rxlifecycle2.kotlin.bindUntilEventimport kotlinx.android.synthetic.main.activity_main.*class MainActivity : RxAppCompatActivity(), View.OnClickListener {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        initView()    }    private fun initView() {        login.setOnClickListener(this)    }    /**     * 登录测试     */    fun login() {        RetrofitManager.instance.createService(ApiService::class.java).login(Api.LOGIN_URL,"18612991023","111111")            .compose(NetScheduler.compose())            .bindUntilEvent(this, ActivityEvent.DESTROY)            .subscribe(object : NetResponseObserver<UserBean>(this){                override fun success(data: UserBean) {                    Toast.makeText(this@MainActivity,data.result.phone,Toast.LENGTH_SHORT).show()                }                override fun failure(statusCode: Int, apiErrorModel: ApiErrorModel) {                }            })    }    /**     * 点击事件     */    override fun onClick(v: View?) {        when (v!!.id) {            R.id.login -> login()            R.id.reg -> reg()        }    }    /**     * 注册测试     */    private fun reg() {        TODO("not implemented") //To change body of created functions use File | Settings | File Templates.    }}